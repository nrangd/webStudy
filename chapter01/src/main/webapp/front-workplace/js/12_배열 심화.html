<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>12_배열 심화</title>
</head>
<body>
    <h3># 배열 멋있게 다루기</h3>

    <script>
        const arr = [1, 2, 3, 4, 5, 6];

        // 배열.forEach(콜백) : 배열의 모든 값을 활용해 전달한 함수를 실행한다
        arr.forEach((value, index, original) => {
            console.log(`값은 ${value}이고 ${index}번째 요소입니다.`);
            console.log(`원본 배열은 ${original}입니다.`);
        });

        const scores = [90, 91, 75, 88, 67, 45, 70];

        // 배열.map(콜백) : 배열의 각 값으로 콜백을 실행한 결과로 이루어진 새 배열을 반환

        const examResult = scores.map(score => score >= 60 ? 'pass' : 'fail');
        console.log(examResult);

        // 연습: scores 배열로 grades 배열을 생성해보세요
        const examResult2 = scores.map(score => {
            if(score > 100) {
                return 'F';
            }
            if(score >= 90) {
                return 'A';
            } else if(score >= 80) {
                return 'B';
            } else if(score >= 70) {
                return 'C';
            } else if (score >= 60) {
                return 'D';
            } else {
                return 'F';
            }
        });

        const examResult3 = scores.map(score => score > 100? 'F': score >= 90? 'A': score >= 80? 'B': score >= 70?'C':score >= 60? 'D':'F');
        
        console.log(examResult3);

        // 연습2: 다음 객체 배열에 평균 점수를 추가한 새로운 배열을 만들어보세요
        const students = [
            {
                name: '유재석',
                kor: 90,
                eng: 88,
                math: 80
            },
            {
                name: '빌 게이츠',
                kor: 15,
                eng: 100,
                math: 99
            },
            {
                name: '마이클 조던',
                kor: 33,
                eng: 45,
                math: 13
            }
        ]
        console.log(students);

        console.log(students.map((student) => {
            student.avg = (student.kor + student.eng + student.math)/ 3;
            return student;
        }));

        // 같이 해본 문제

        const getTotal = stu => stu.kor + stu.eng + stu.math
        const getAvg = stu => getTotal(stu)/3;

        // ...으로 배열뿐만 아니라 객체도 풀어서 사용할 수 있다.
        
        // 화살표 함수의 리턴 축약 버전으로 객체를 리턴하기 위해서는 {}를 괄호('()')로 감싸주어야 한다
        const students2 = students.map(stu => ({
            
                ...stu,
                avg: getAvg(stu),
                total: getTotal(stu)
            
        }));

        const students3 = students.map(stu => {
            return {
                ...stu,
                avg: getAvg(stu),
                total: getTotal(stu)
            }
        });
        console.log(students3);

        // 배열.filter(콜백) : 값들 중에 콜백을 실행한 결과가 true인 요소만 남긴 새 배열을 반환하는 메서드(진짜 필터)
        const filterResult = students2.filter(stu => stu.avg > 80);
        console.log(filterResult);

        const snacks = ['초코파이', '엄마손파이', '포테토칩', '포카칩', '웰치스', '제로콜라',
            '초코하임', '치토스'];

        const pies = snacks.filter(snack => snack.endsWith('파이'));
        console.log(pies);
        
        // 배열을 리턴하는 메서드의 경우 이렇게 연쇄적으로 활용할 수 있다 (메서드 체이닝)
        snacks
            .filter(snack => snack.endsWith('칩'))
            .forEach(snack => console.log(`남은 과자:`, snack));

        console.log(snacks);
        // 배열.reduce(콜백) : 배열의 모든 값을 활용하여 하나의 결과를 도출해내기 위해 사용한다
        // 콜백의 첫 번째 인자로는 누적값이 오고 두 번째 인자로는 현재 값이 온다.
        const totalScore = scores.reduce((acc, curr, index, original) => {
            console.log('acc', acc);
            console.log('curr:', curr);
            console.log('index:', index);
            console.log('original:', origin);

            return acc + curr; // 여기서 리턴하는 값이 계속 누적된다.
        });
        console.log('총합:', totalScore);

        const bestScore = score.reduce((acc, curr) => acc < curr ? curr : acc);
        console.log('최고점수:', bestScore);

        /*
            (1) 학번, 이름, 국어, 영어, 수학, 수업 만족도(별 0 ~ 5)를 가진
                학생 100명의 자바스크립트 오브젝트(json)를 정보를 랜덤으로 생성하기
            
            (2) 모든 학생들의 정보를 HTML에 테이블 형태로 출력하기
                (60점 미만인 점수는 빨간 글씨로 출력하기, 학생들의 수업 만족도는 별의 개수로 출력하기)

            (3) 모든 학생들의 평균 점수를 HTML에 테이블 형태로 출력하기

            (4) 수학 점수가 60점 미만인 학생들로 이루어진 테이블 HTML에 출력하기

            (5) 2번의 마지막 행에는 각 열의 총합과 평균을 출력하기 (학번, 이름 열 제외)
        */

    </script>
</body>
</html>
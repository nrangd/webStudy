<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>08_함수</title>
</head>
<body>
    <h3># 자바스크립트에서 함수 사용하기</h3>

    <ul>
        <li>function 키워드를 사용해 함수를 선언할 수 있다</li>
        <li>선언한 함수를 ()를 붙이지 않고 활용할 수도 있다</li>
        <li>
            함수 이름 뒤에 ()를 붙여 호출하면 값을 리턴하고
            ()를 붙이지 않고 사용하면 함수 자체를 전달하는 것이 된다
        </li>
        <li>리턴 타입을 적지 않아도 값을 리턴 할 수 있다</li>
        <li>자바스크립트는 변수에 함수를 저장할 수 있다
            (자바스크립트 같은 함수형 프로그래밍에선
            함수가 퍼스트클래스라서 그러는듯 함)
            (이를 고차함수라고 부르는듯함)
        </li>
    </ul>

    <h3># 자바 스크립트 함수의 종류</h3>

    <ul>
        <li>function으로 선언해 사용하는 함수</li>
        <li>함수 표현식: 변수에 함수를 담아서 사용하는 함수</li>
        <li>화살표 함수(람다식): 함수 표현식을 좀 더 멋있게 사용하기 위한 함수</li>
    </ul>

    <script>
        function abc(a, b) {
            return a + b;
        }

        function 전달받은함수를실행하는함수(a) {
            console.log(a(a, 3));
        }

        전달받은함수를실행하는함수(abc);

        // 함수를 실행하여 결과를 얻어낼수도 있고, 함수 자체를 전달할 수도 있다
        console.log(abc(10, 11));
        console.log(abc);

        // 선언한 함수를 변수에 저장할 수도 있다.
        // 선언할 때 사용한 이름은 어차피 사용하지 못하기 때문에 안적어도 된다 (익명)
        // => 변수로 함수를 선언해서 사용하는 것을 함수표현식(리터럴 방식)이라고 한다
        const f = function abc2() {
            console.log('나는 abc2다.');
        };

        // 함수를 다른 변수에 전달해줄수도 있다.
        const g = f;

        f();
        g();

        // fucntion 키워드로 선언한 함수들은 아래에 있어도 실행이 가능하다
        confirmmm();
        cancel();
       // question(); //실행 안됨

        // 함수 선언은 코드의 진행보다 먼저 실행되기 때문에 밑에 있어도 상관 없다
        // (호이스팅, Hoisting 평범한 코드보다 먼저 실행되는거)
        function confirmmm() {
            console.log('확인');
        }

        function cancel() {
            console.log('취소');
        }

        // console.log(a);
        // const a = 10;

        // 함수 표현식은 순서를 거스를 수 없다 (변수 선언이기 때문에)
        // (변수 선언의 경우에 선언은 호이스팅되지만 대입은 호이스팅되지 않는다)
        const question = function () {
            console.log('정말 그렇게 하시겠습니까?');
        };

        // 화살표 함수 (function 대신 화살표를 사용)
        const kick = () => {
            console.log('강퇴');
        };

        kick();

        // 한 줄 짜리 함수는 {} 생략이 가능하다
        // 매개 변수도 하나라면() 생략이 가능하다
        const ban = (name, period) => 
            console.log(`'${name}'님을 ${period}일 동안 차단 했습니다`);

        const sub = (name, period) => 
            console.log(`'${name}'님을 ${period}일 동안 구독 했습니다`);

        const userManagement = (name, period, action) => action(name, period);

        userManagement('김말이', 20, ban);
        userManagement('떡볶이', 35, sub);

        // 함수와 오브젝트 함께 사용하기
        // 오브젝트 내부에 함수를 정의할 때 화살표 함수를 사용하면 this가 안먹히게 된다.
        const car = {
            name: '레이',
            cost: 14000000,
            efficiency: 12.9,
            displaycement: 998,
            move: function () {
                console.log(`연비 ${this.efficiency}km의 ${this.name}가 굴러갑니다.`);
            },
        };

        car.move();

        // 다음 함수를 화살표 함수로 변경해보세요
        // function ask(work, yes, no) {
        //     // window.confirm() : 확인 창 띄우는 메서드
        //     if (window.confirm(work)) {
        //         yes();
        //     } else {
        //         no();
        //     }
        // }

        // ask(
        //     '시험지를 제출하시겠습니까?',
        //     function () { alert('시험지가 제출되었습니다.'); },
        //     function () { alert('취소 버튼을 누르셧습니다.'); }
        // )

        // const ask = (work, yes, no) => {
        //     if (window.confirm(work)) {
        //         yes();
        //     } else {
        //         no();
        //     }
        // }

        // ask(
        //     '시험지를 제출하시겠습니까?',
        //     () => alert('y'),
        //     () => alert('n')
        // )

        const ask2 = (work, yes, no) => window.confirm(work) ? yes() : no();
        
        // ask2('시험지를 제출하시겠습니까?', () => alert('제출되었습니다'), () => alert('취소버튼을 누르셧습니다'));
        
        /*
        #다음 함수를 정의하고 올바르게 동작하는지 테스트 해보세요
		
		1. 전달한 문자가 알파벳이면 true를 반환, 아니면 false를 반환하는 함수
		2. 전달한 숫자가 3의 배수이면 true를 반환, 아니면 false를 반환하는 함수
		3. 숫자를 하나 전달하면 문자열 "짝수입니다" 또는 "홀수입니다"를 반환하는 함수
		4. 숫자를 전달하면 해당 숫자의 모든 약수를 배열로 반환하는 함수
		5. 전달한 정수가 소수라면 true를 반환하고 아니면 false를 반환하는 함수
		6. 메세지와 횟수를 전달하면 해당 메세지를 전달한 횟수만큼 반복하는 함수
        */

        // 1
        // const isAlpha = word => { return word >= 'a' && word <= 'z' || word >= 'A' && word <= 'Z' };
        // 함수가 다 한줄이어서 {}를 생략할 때 리턴도 생략이 가능하다
        const isAlpha = word => word >= 'a' && word <= 'z' || word >= 'A' && word <= 'Z';
            
        // 2
        // const isTriple = num => { return (num % 3) == 0 };
        const isTriple = num => (num % 3) == 0;
    
        // 3
        // const EvenOrOdd = num => { return (num % 2 == 0) ? '짝수입니다' : '홀수입니다' };
        const EvenOrOdd = num => (num % 2 == 0) ? '짝수입니다' : '홀수입니다';

        // 4
        // const divisor = num => {
            
        // };

        const isDivisor = (num, d) => num % d == 0;
        const getAllDivisors = num => {
            const arr = [];
            let count = 0;

            for (let i = 1; i <= num; i++) {
                if(isDivisor(num, i)) {
                    arr[count++] = i;
                }
            }
            return arr;
        }

        // 5
        const isPrime = num => getAllDivisors(num).length == 2;

        // 6
        const repeatMessage = (message, repeat) => {
            for (let i = 0; i < repeat; i++) {
                console.log(message);
            }
        }


        const test = {
            azList: ['a','b'],
            isWord: function(word) {
                if(word in this.azList){
                    console.log('a');
                } else {
                    console.log('없음');
                }
            },
        };
        test.isWord('a');

        console.log(isAlpha('a'));
        console.log(isTriple(3));
        console.log(EvenOrOdd(2));
        console.log(getAllDivisors(90));
        console.log(isPrime(11));
        repeatMessage("hi", 3);
    </script>
</body>
</html>